<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transactions</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
    <h1>Transaction History</h1>
    <table>
        <thead>
            <tr>
                <th>Order ID</th>
                <th>Date</th>
                <th>Employee ID</th>
                <th>Supplier ID</th>
                <th>Total Amount</th>
            </tr>
        </thead>
        <tbody id="transaction-table">
        </tbody>
    </table>

    <script>
        const supabaseUrl = "https://vdefkqccbueaoylrlsqx.supabase.co";
        const supabaseKey = "YOUR_SUPABASE_KEY";
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);

        async function fetchTransactions() {
            const { data, error } = await supabase
                .from("Orders")
                .select("orderID, OrderDate, EmployeeID, SupplierID, TotalAmount")
                .order("OrderDate", { ascending: false });

            if (error) {
                console.error("Error fetching transactions:", error);
                return;
            }

            const tableBody = document.getElementById("transaction-table");
            tableBody.innerHTML = "";
            data.forEach(order => {
                const row = `<tr>
                    <td>${order.orderID}</td>
                    <td>${new Date(order.OrderDate).toLocaleString()}</td>
                    <td>${order.EmployeeID}</td>
                    <td>${order.SupplierID}</td>
                    <td>$${order.TotalAmount.toFixed(2)}</td>
                </tr>`;
                tableBody.innerHTML += row;
            });
        }

        fetchTransactions();
    </script>
</body>
</html>

